language: node_js
branches:
  only:
  - master
matrix:
  include:
  - node_js: 8
    env:
    - TEST_SUITE=lint
    script: npm run lint
  - node_js: 8
    env:
    - TEST_SUITE=unit
    addons:
      sauce_connect: true
    script: npm run test:unit && npm run posttest
    after_success:
    - codecov
  - node_js: 8
    env:
    - TEST_SUITE=closure
    - CLOSURE=1
    script: npm run test:closure
  - node_js: 8
    env:
    - TEST_SUITE=site-generator
    script: npm run test:site
  - node_js: 8
    env:
    - TEST_SUITE=screenshot
    script: npm run screenshot:test -- --no-fetch
before_install:
  # Source the script to run it in the same shell process. This ensures that any environment variables set by the
  # script are visible to subsequent Travis CLI commands.
  # https://superuser.com/a/176788/62792
  - source test/screenshot/commands/travis.sh
